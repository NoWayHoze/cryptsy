(ns cryptsy.core
  (:require [clj-http.client :as client]))

(defn foo
  "I don't do a whole lot."
  [x]
  (println x "Hello, World!"))


( def markets (client/get "http://pubapi.cryptsy.com/api.php?method=marketdatav2" ))


({:label "LTC/USD", :secondarycode "USD", :primarycode "LTC", :marketid "1"}
 {:label "BTC/USD", :secondarycode "USD", :primarycode "BTC", :marketid "2"}
 {:label "LTC/BTC", :secondarycode "BTC", :primarycode "LTC", :marketid "3"}
 {:label "FTC/LTC", :secondarycode "LTC", :primarycode "FTC", :marketid "4"}
         {:label "FTC/BTC", :secondarycode "BTC", :primarycode "FTC", :marketid "5"}
         {:label "FTC/USD", :secondarycode "USD", :primarycode "FTC", :marketid "6"}
         {:label "MNC/BTC", :secondarycode "BTC", :primarycode "MNC", :marketid "7"}
         {:label "CNC/BTC", :secondarycode "BTC", :primarycode "CNC", :marketid "8"}
         {:label "RYC/BTC", :secondarycode "BTC", :primarycode "RYC", :marketid "9"}
         {:label "BQC/BTC", :secondarycode "BTC", :primarycode "BQC", :marketid "10"}
         {:label "YAC/BTC", :secondarycode "BTC", :primarycode "YAC", :marketid "11"}
         {:label "ELC/BTC", :secondarycode "BTC", :primarycode "ELC", :marketid "12"} {:label "NVC/BTC", :secondarycode "BTC", :primarycode "NVC", :marketid "13"} {:label "WDC/BTC", :secondarycode "BTC", :primarycode "WDC", :marketid "14"} {} {} {:label "CNC/LTC", :secondarycode "LTC", :primarycode "CNC", :marketid "17"} {} {} {} {:label "WDC/LTC", :secondarycode "LTC", :primarycode "WDC", :marketid "21"} {:label "YAC/LTC", :secondarycode "LTC", :primarycode "YAC", :marketid "22"} {:label "BTB/BTC", :secondarycode "BTC", :primarycode "BTB", :marketid "23"} {} {:label "JKC/BTC", :secondarycode "BTC", :primarycode "JKC", :marketid "25"} {:label "DGC/BTC", :secondarycode "BTC", :primarycode "DGC", :marketid "26"} {:label "TRC/BTC", :secondarycode "BTC", :primarycode "TRC", :marketid "27"} {:label "PPC/BTC", :secondarycode "BTC", :primarycode "PPC", :marketid "28"} {:label "NMC/BTC", :secondarycode "BTC", :primarycode "NMC", :marketid "29"} {:label "GLD/BTC", :secondarycode "BTC", :primarycode "GLD", :marketid "30"} {:label "PXC/BTC", :secondarycode "BTC", :primarycode "PXC", :marketid "31"} {:label "NBL/BTC", :secondarycode "BTC", :primarycode "NBL", :marketid "32"} {:label "FRK/BTC", :secondarycode "BTC", :primarycode "FRK", :marketid "33"} {:label "LKY/BTC", :secondarycode "BTC", :primarycode "LKY", :marketid "34"} {:label "JKC/LTC", :secondarycode "LTC", :primarycode "JKC", :marketid "35"} {:label "GLD/LTC", :secondarycode "LTC", :primarycode "GLD", :marketid "36"} {:label "RYC/LTC", :secondarycode "LTC", :primarycode "RYC", :marketid "37"} {:label "IXC/BTC", :secondarycode "BTC", :primarycode "IXC", :marketid "38"} {:label "FRC/BTC", :secondarycode "BTC", :primarycode "FRC", :marketid "39"} {:label "DVC/BTC", :secondarycode "BTC", :primarycode "DVC", :marketid "40"} {} {} {:label "AMC/BTC", :secondarycode "BTC", :primarycode "AMC", :marketid "43"} {:label "FST/BTC", :secondarycode "BTC", :primarycode "FST", :marketid "44"} {:label "MEC/BTC", :secondarycode "BTC", :primarycode "MEC", :marketid "45"} {:label "DBL/LTC", :secondarycode "LTC", :primarycode "DBL", :marketid "46"} {:label "EZC/BTC", :secondarycode "BTC", :primarycode "EZC", :marketid "47"} {:label "ARG/BTC", :secondarycode "BTC", :primarycode "ARG", :marketid "48"} {:label "BTE/BTC", :secondarycode "BTC", :primarycode "BTE", :marketid "49"} {:label "BTG/BTC", :secondarycode "BTC", :primarycode "BTG", :marketid "50"} {:label "SBC/BTC", :secondarycode "BTC", :primarycode "SBC", :marketid "51"} {:label "DVC/LTC", :secondarycode "LTC", :primarycode "DVC", :marketid "52"} {:label "CAP/BTC", :secondarycode "BTC", :primarycode "CAP", :marketid "53"} {:label "NRB/BTC", :secondarycode "BTC", :primarycode "NRB", :marketid "54"} {:label "EZC/LTC", :secondarycode "LTC", :primarycode "EZC", :marketid "55"} {:label "MEM/LTC", :secondarycode "LTC", :primarycode "MEM", :marketid "56"} {:label "ALF/BTC", :secondarycode "BTC", :primarycode "ALF", :marketid "57"} {:label "CRC/BTC", :secondarycode "BTC", :primarycode "CRC", :marketid "58"} {:label "IFC/BTC", :secondarycode "BTC", :primarycode "IFC", :marketid "59"} {:label "IFC/LTC", :secondarycode "LTC", :primarycode "IFC", :marketid "60"} {:label "FLO/LTC", :secondarycode "LTC", :primarycode "FLO", :marketid "61"} {:label "MST/LTC", :secondarycode "LTC", :primarycode "MST", :marketid "62"} {:label "XPM/BTC", :secondarycode "BTC", :primarycode "XPM", :marketid "63"} {:label "NAN/BTC", :secondarycode "BTC", :primarycode "NAN", :marketid "64"} {:label "KGC/BTC", :secondarycode "BTC", :primarycode "KGC", :marketid "65"} {:label "ANC/BTC", :secondarycode "BTC", :primarycode "ANC", :marketid "66"} {:label "XNC/LTC", :secondarycode "LTC", :primarycode "XNC", :marketid "67"} {:label "CSC/BTC", :secondarycode "BTC", :primarycode "CSC", :marketid "68"} {:label "EMD/BTC", :secondarycode "BTC", :primarycode "EMD", :marketid "69"} {:label "CGB/BTC", :secondarycode "BTC", :primarycode "CGB", :marketid "70"} {:label "QRK/BTC", :secondarycode "BTC", :primarycode "QRK", :marketid "71"} {:label "DMD/BTC", :secondarycode "BTC", :primarycode "DMD", :marketid "72"} {:label "YBC/BTC", :secondarycode "BTC", :primarycode "YBC", :marketid "73"} {:label "CMC/BTC", :secondarycode "BTC", :primarycode "CMC", :marketid "74"} {:label "ORB/BTC", :secondarycode "BTC", :primarycode "ORB", :marketid "75"} {:label "GLC/BTC", :secondarycode "BTC", :primarycode "GLC", :marketid "76"} {} {:label "GLX/BTC", :secondarycode "BTC", :primarycode "GLX", :marketid "78"} {} {:label "HBN/BTC", :secondarycode "BTC", :primarycode "HBN", :marketid "80"} {:label "SPT/BTC", :secondarycode "BTC", :primarycode "SPT", :marketid "81"} {:label "GDC/BTC", :secondarycode "BTC", :primarycode "GDC", :marketid "82"} {:label "STR/BTC", :secondarycode "BTC", :primarycode "STR", :marketid "83"} {:label "GME/LTC", :secondarycode "LTC", :primarycode "GME", :marketid "84"} {:label "ZET/BTC", :secondarycode "BTC", :primarycode "ZET", :marketid "85"} {:label "PHS/BTC", :secondarycode "BTC", :primarycode "PHS", :marketid "86"} {:label "RED/LTC", :secondarycode "LTC", :primarycode "RED", :marketid "87"} {:label "SRC/BTC", :secondarycode "BTC", :primarycode "SRC", :marketid "88"} {} {:label "NEC/BTC", :secondarycode "BTC", :primarycode "NEC", :marketid "90"} {:label "CPR/LTC", :secondarycode "LTC", :primarycode "CPR", :marketid "91"} {:label "PYC/BTC", :secondarycode "BTC", :primarycode "PYC", :marketid "92"} {:label "ELP/LTC", :secondarycode "LTC", :primarycode "ELP", :marketid "93"} {:label "ADT/LTC", :secondarycode "LTC", :primarycode "ADT", :marketid "94"} {:label "CLR/BTC", :secondarycode "BTC", :primarycode "CLR", :marketid "95"} {:label "DGC/LTC", :secondarycode "LTC", :primarycode "DGC", :marketid "96"} {} {:label "SXC/LTC", :secondarycode "LTC", :primarycode "SXC", :marketid "98"} {} {:label "MEC/LTC", :secondarycode "LTC", :primarycode "MEC", :marketid "100"} {:label "PXC/LTC", :secondarycode "LTC", :primarycode "PXC", :marketid "101"} {:label "BUK/BTC", :secondarycode "BTC", :primarycode "BUK", :marketid "102"} {} {} {} {:label "XPM/LTC", :secondarycode "LTC", :primarycode "XPM", :marketid "106"} {:label "TIX/LTC", :secondarycode "LTC", :primarycode "TIX", :marketid "107"} {:label "NET/LTC", :secondarycode "LTC", :primarycode "NET", :marketid "108"} {:label "COL/LTC", :secondarycode "LTC", :primarycode "COL", :marketid "109"} {} {:label "ASC/LTC", :secondarycode "LTC", :primarycode "ASC", :marketid "111"} {} {} {:label "TEK/BTC", :secondarycode "BTC", :primarycode "TEK", :marketid "114"} {:label "XJO/BTC", :secondarycode "BTC", :primarycode "XJO", :marketid "115"} {:label "LK7/BTC", :secondarycode "BTC", :primarycode "LK7", :marketid "116"} {:label "TAG/BTC", :secondarycode "BTC", :primarycode "TAG", :marketid "117"} {} {:label "PTS/BTC", :secondarycode "BTC", :primarycode "PTS", :marketid "119"} {:label "Points/BTC", :secondarycode "BTC", :primarycode "Points", :marketid "120"} {:label "ANC/LTC", :secondarycode "LTC", :primarycode "ANC", :marketid "121"} {} {:label "CGB/LTC", :secondarycode "LTC", :primarycode "CGB", :marketid "123"} {:label "FST/LTC", :secondarycode "LTC", :primarycode "FST", :marketid "124"} {:label "PPC/LTC", :secondarycode "LTC", :primarycode "PPC", :marketid "125"} {:label "QRK/LTC", :secondarycode "LTC", :primarycode "QRK", :marketid "126"} {:label "ZET/LTC", :secondarycode "LTC", :primarycode "ZET", :marketid "127"} {:label "SBC/LTC", :secondarycode "LTC", :primarycode "SBC", :marketid "128"} {:label "BET/BTC", :secondarycode "BTC", :primarycode "BET", :marketid "129"} {:label "TGC/BTC", :secondarycode "BTC", :primarycode "TGC", :marketid "130"} {:label "DEM/BTC", :secondarycode "BTC", :primarycode "DEM", :marketid "131"} {:label "DOGE/BTC", :secondarycode "BTC", :primarycode "DOGE", :marketid "132"} {:label "UNO/BTC", :secondarycode "BTC", :primarycode "UNO", :marketid "133"} {:label "NET/BTC", :secondarycode "BTC", :primarycode "NET", :marketid "134"} {:label "DOGE/LTC", :secondarycode "LTC", :primarycode "DOGE", :marketid "135"} {:label "CAT/BTC", :secondarycode "BTC", :primarycode "CAT", :marketid "136"} {:label "LOT/BTC", :secondarycode "BTC", :primarycode "LOT", :marketid "137"} {:label "FFC/BTC", :secondarycode "BTC", :primarycode "FFC", :marketid "138"} {:label "EAC/BTC", :secondarycode "BTC", :primarycode "EAC", :marketid "139"} {:label "ZCC/BTC", :secondarycode "BTC", :primarycode "ZCC", :marketid "140"} {:label "42/BTC", :secondarycode "BTC", :primarycode "42", :marketid "141"} {:label "BCX/BTC", :secondarycode "BTC", :primarycode "BCX", :marketid "142"} {:label "RPC/BTC", :secondarycode "BTC", :primarycode "RPC", :marketid "143"} {:label "OSC/BTC", :secondarycode "BTC", :primarycode "OSC", :marketid "144"} {:label "MOON/LTC", :secondarycode "LTC", :primarycode "MOON", :marketid "145"} {} {:label "TIPS/LTC", :secondarycode "LTC", :primarycode "TIPS", :marketid "147"} {:label "LEAF/BTC", :secondarycode "BTC", :primarycode "LEAF", :marketid "148"} {:label "MEOW/BTC", :secondarycode "BTC", :primarycode "MEOW", :marketid "149"} {:label "CASH/BTC", :secondarycode "BTC", :primarycode "CASH", :marketid "150"} {:label "VTC/BTC", :secondarycode "BTC", :primarycode "VTC", :marketid "151"}
         {:label "MAX/BTC", :secondarycode "BTC", :primarycode "MAX", :marketid "152"}
         {:label "SXC/BTC", :secondarycode "BTC", :primarycode "SXC", :marketid "153"} {:label "CACH/BTC", :secondarycode "BTC", :primarycode "CACH", :marketid "154"} {:label "DRK/BTC", :secondarycode "BTC", :primarycode "DRK", :marketid "155"} {:label "MINT/BTC", :secondarycode "BTC", :primarycode "MINT", :marketid "156"} {:label "BEN/BTC", :secondarycode "BTC", :primarycode "BEN", :marketid "157"} {:label "SMC/BTC", :secondarycode "BTC", :primarycode "SMC", :marketid "158"} {:label "NXT/BTC", :secondarycode "BTC", :primarycode "NXT", :marketid "159"} {:label "AUR/BTC", :secondarycode "BTC", :primarycode "AUR", :marketid "160"} {:label "AUR/LTC", :secondarycode "LTC", :primarycode "AUR", :marketid "161"} {:label "NXT/LTC", :secondarycode "LTC", :primarycode "NXT", :marketid "162"} {:label "UTC/BTC", :secondarycode "BTC", :primarycode "UTC", :marketid "163"} {:label "MZC/BTC", :secondarycode "BTC", :primarycode "MZC", :marketid "164"} {:label "FLAP/BTC", :secondarycode "BTC", :primarycode "FLAP", :marketid "165"} {:label "TAK/BTC", :secondarycode "BTC", :primarycode "TAK", :marketid "166"} {:label "DGB/BTC", :secondarycode "BTC", :primarycode "DGB", :marketid "167"} {:label "SAT/BTC", :secondarycode "BTC", :primarycode "SAT", :marketid "168"} {:label "RDD/BTC", :secondarycode "BTC", :primarycode "RDD", :marketid "169"} {:label "ZED/BTC", :secondarycode "BTC", :primarycode "ZED", :marketid "170"} {:label "FRK/LTC", :secondarycode "LTC", :primarycode "FRK", :marketid "171"} {} {:label "POT/BTC", :secondarycode "BTC", :primarycode "POT", :marketid "173"} {} {:label "CTM/LTC", :secondarycode "LTC", :primarycode "CTM", :marketid "175"} {:label "ZEIT/LTC", :secondarycode "LTC", :primarycode "ZEIT", :marketid "176"} {:label "LYC/BTC", :secondarycode "BTC", :primarycode "LYC", :marketid "177"} {:label "KDC/BTC", :secondarycode "BTC", :primarycode "KDC", :marketid "178"} {:label "BC/BTC", :secondarycode "BTC", :primarycode "BC", :marketid "179"} {:label "SPA/BTC", :secondarycode "BTC", :primarycode "SPA", :marketid "180"} {} {:label "DOGE/USD", :secondarycode "USD", :primarycode "DOGE", :marketid "182"} {:label "EXE/BTC", :secondarycode "BTC", :primarycode "EXE", :marketid "183"} {:label "NYAN/BTC", :secondarycode "BTC", :primarycode "NYAN", :marketid "184"} {:label "HVC/BTC", :secondarycode "BTC", :primarycode "HVC", :marketid "185"} {:label "BAT/LTC", :secondarycode "LTC", :primarycode "BAT", :marketid "186"} {:label "MN1/BTC", :secondarycode "BTC", :primarycode "MN1", :marketid "187"} {:label "EMC2/BTC", :secondarycode "BTC", :primarycode "EMC2", :marketid "188"} {:label "MRY/BTC", :secondarycode "BTC", :primarycode "MRY", :marketid "189"} {:label "RBBT/LTC", :secondarycode "LTC", :primarycode "RBBT", :marketid "190"} {:label "BC/LTC", :secondarycode "LTC", :primarycode "BC", :marketid "191"} {:label "FLT/BTC", :secondarycode "BTC", :primarycode "FLT", :marketid "192"} {:label "KARM/LTC", :secondarycode "LTC", :primarycode "KARM", :marketid "193"} {:label "DMC/LTC", :secondarycode "LTC", :primarycode "DMC", :marketid "194"} {:label "WC/BTC", :secondarycode "BTC", :primarycode "WC", :marketid "195"} {:label "MN2/BTC", :secondarycode "BTC", :primarycode "MN2", :marketid "196"} {:label "CINNI/BTC", :secondarycode "BTC", :primarycode "CINNI", :marketid "197"} {:label "COMM/BTC", :secondarycode "BTC", :primarycode "COMM", :marketid "198"}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           {:label "AC/BTC", :secondarycode "BTC", :primarycode "AC", :marketid "199"})

;(:label
  (first
    (vals
      (:markets
        (:return
          (:body (client/get (str "http://pubapi.cryptsy.com/api.php?method=singlemarketdata&marketid=" 1) {:as :json}))))));)


(-> (client/get (str "http://pubapi.cryptsy.com/api.php?method=singlemarketdata&marketid=" 1) {:as :json}) :body :return :markets vals first :label)


(for [i (range 1 200)]
  (let [ market (-> (client/get (str "http://pubapi.cryptsy.com/api.php?method=singlemarketdata&marketid=" i) {:as :json}) :body :return :markets vals first)]
         (select-keys market [:marketid :primarycode :secondarycode :label])))
